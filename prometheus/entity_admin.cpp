#include "entity_admin.h"
#include "Statescript.h"
#include "game.h"
#include <imgui.h>
#include <MinHook.h>
#include "STU_Editable.h"
#include "player_spawner.h"
#include "StatescriptVar.h"
#include "stu_resources.h"
#include "MovementState.h"
#include "Viewmodel.h"
#include "state_replicator.h"
#include "serialization.h"
#include "demo_cammoves.cpp"

__int64 PrometheusSystem::get_inheritance() {
	return NULL;
}
bool PrometheusSystem::is_assignable_to(__int64) {
	return false;
}
bool PrometheusSystem::is_instance_of(__int64) {
	return false;
}

const char* PrometheusSystem::get_system_name() {
	return "PrometheusSystem";
}
void PrometheusSystem::deallocate() {
	
}

void PrometheusSystem::OnInitialize() {
	_local_controller_entities.ptr = nullptr;
	_local_controller_entities.num = 0;
	_local_controller_entities.max = 0;
	memset(_old_lbutton_states, 0, sizeof(_old_lbutton_states)); //Removing this crashes the game on initialization. You know what? idc.
	_input_component = nullptr;
	_world = nullptr;

	//0xcc6110 0xcc67f5
	//0xcc57d3 0xcc4c22
}

void PrometheusSystem::field_1() {
	auto str = stacktrace_str();
	printf("System field_1:\n%s\n", str.c_str());
}
void PrometheusSystem::PreDelete() {
	auto str = stacktrace_str();
	printf("System PreDelete:\n%s\n", str.c_str());
}

char* PrometheusSystem::GetSubscriptions(int* count) {
	static char subscribed_components[] = {
		0x2F
	};
	*count = sizeof(subscribed_components);
	return subscribed_components;
}
void PrometheusSystem::OnCreationAfterEmplaced(Entity* ent) {
	printf("OnDeferredCreation: %x\n", ent->entity_id);
}
void PrometheusSystem::OnCreation(Entity* cb_ent) {
	printf("OnCreation: %x\n", cb_ent->entity_id);
	if (cb_ent->getById(0x2F)) {
		_local_controller_entities.emplace_item(cb_ent);
		_newly_added_entities.push_back(cb_ent);
		_trigger_helloVoiceLine_ticks = 50;
	}
}
void PrometheusSystem::field_3() {
	auto str = stacktrace_str();
	printf("System field_3:\n%s\n", str.c_str());
}
void PrometheusSystem::OnDeletion(Entity* ent) {
	//TODO This does apparently not work
	for (int i = 0; i < _local_controller_entities.num; i++) {
		if (_local_controller_entities.ptr[i] == ent)
			_local_controller_entities.remove_item(i--);
	}
}

string_rep* (*get_displayString_orig)(string_rep*, __int64 id, __int64);
string_rep* get_displayString_func(string_rep* a1, __int64 id, __int64 a3) {
	if (id == 0xde00000000005df) {
		const char* str = "Welcome Back, Hero!";
		a1->extend_to(strlen(str));
		strcpy(a1->get(), str);
		a1->actual_size = strlen(str);
		return a1;
	}
	return get_displayString_orig(a1, id, a3);
}

void play_game_btn() {
	PrometheusSystem::instance()->demo_join_game = true;
}

//0xd774b0
char SendHeroSelection(StatescriptAction_vt** impl, StatescriptState* state, StatescriptInstance* ss, STUBase<>* stu_data) {
	auto stu = stu_data->to_editable();
	auto hero = stu.get_argument_object("m_hero");
	auto hero_cv = (STUConfigVar*)hero.value;
	StatescriptPrimitive hero_value;
	hero_cv->get_value(ss, &hero_value);
	owassert(hero_value.type == StatescriptPrimitive_INT64);

	auto behavior = stu.get_argument_primitive("m_behavior").get_value<int>();
	/*printf("HeroSelect behavior: %hx\n", behavior);*/
	//0 = just send teammate preview
	if (hero_value.value != 0 && behavior == 1) {
		printf("Selected Hero: %p\n", hero_value.value);

		auto old_local = GameEntityAdmin()->getLocalEnt();
		if (old_local) {
			auto hero_info = old_local->getById<Component_3F_PlayerInfo>(0x3F);
			if (hero_info->selected_heroid == hero_value.value) {
				return 1;
			}
		}

		PrometheusSystem::instance()->DeleteLocalEnt();

		auto hero_stu = stu_resources::GetByID(hero_value.value);
		auto model_entid = hero_stu->to_editable().get_argument_resource("m_gameplayEntity")->resource_id;

		player_spawner spawner(model_entid);
		spawner.controller_info.heroid = hero_value.value;
		Component_1_SceneRendering::InitData init{};
		auto local_ents = spawner.spawn();

		//TODO Move
		state_replicator::ChangeHeroMessage msg;
		msg.heroid = hero_value.value;
		msg.skinid = 0;
		state_replicator::emplace_hero_update(msg);
	}
	return 1;
}

//0xd94930
char matchmaking_cv(__int64, __int64, __int64, StatescriptPrimitive* result) {
	result->type = StatescriptPrimitive_BYTE;
	result->value = PrometheusSystem::instance()->demo_join_game;
	return 1;
}

void pachipachi(Vector4 position, Vector4 rotation, Vector4 scaling) {
	auto res = try_load_resource(0x04000000000006CA);
	if (res == 0) //Not valid on all maps, this is only for hanamura
		return;
	auto ea = GameEntityAdmin();
	auto loader = EntityLoader::Create(0x04000000000006CA, res, false, false);
	auto init_data = Component_1_SceneRendering::InitData{};
	init_data.position = position;
	init_data.rotation = rotation;
	init_data.scale = scaling;

	loader->loader_entries[1].init_data = (__int64)&init_data;
	loader->Spawn(ea);
}

void spawn_pachis() {
	pachipachi(Vector4(6.444336, 0.000000, -4.373047, 0), Vector4(0.000000, 0.697113, 0.000000, 0.716962), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(6.405273, 0.000000, -3.110352, 0), Vector4(0.000000, 0.697113, 0.000000, 0.716962), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(6.374023, 0.000000, -2.089844, 0), Vector4(0.000000, 0.697113, 0.000000, 0.716962), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(6.342773, 0.000000, -1.068359, 0), Vector4(0.000000, 0.697113, 0.000000, 0.716962), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(6.317383, 0.000000, -0.216797, 0), Vector4(0.000000, 0.697113, 0.000000, 0.716962), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(6.289062, 0.000000, 0.710938, 0), Vector4(0.000000, 0.697113, 0.000000, 0.716962), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(6.260742, 0.000000, 1.637695, 0), Vector4(0.000000, 0.697113, 0.000000, 0.716962), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(6.235352, 0.000000, 2.480469, 0), Vector4(0.000000, 0.697113, 0.000000, 0.716962), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(6.201172, 0.000000, 3.575195, 0), Vector4(0.000000, 0.696500, 0.000000, 0.717557), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(6.167969, 0.000000, 4.670898, 0), Vector4(0.000000, 0.695886, 0.000000, 0.718152), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(6.149414, 0.000000, 5.260742, 0), Vector4(0.000000, 0.695886, 0.000000, 0.718152), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(6.111328, 0.000000, 6.440430, 0), Vector4(0.000000, 0.695272, 0.000000, 0.718746), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(5.401367, 0.000000, 5.678711, 0), Vector4(0.000000, 0.701476, 0.000000, 0.712694), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(5.409180, 0.000000, 4.913086, 0), Vector4(0.000000, 0.701476, 0.000000, 0.712694), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(5.417969, 0.000000, 4.061523, 0), Vector4(0.000000, 0.701476, 0.000000, 0.712694), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(5.425781, 0.000000, 3.295898, 0), Vector4(0.000000, 0.701476, 0.000000, 0.712694), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(5.434570, 0.000000, 2.444336, 0), Vector4(0.000000, 0.701476, 0.000000, 0.712694), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(5.442383, 0.000000, 1.678711, 0), Vector4(0.000000, 0.701476, 0.000000, 0.712694), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(5.452148, 0.000000, 0.742188, 0), Vector4(0.000000, 0.701476, 0.000000, 0.712694), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(5.459961, 0.000000, -0.106445, 0), Vector4(0.000000, 0.701476, 0.000000, 0.712694), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(5.468750, 0.000000, -0.949219, 0), Vector4(0.000000, 0.701476, 0.000000, 0.712694), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(5.478516, 0.000000, -1.875977, 0), Vector4(0.000000, 0.701476, 0.000000, 0.712694), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(5.488281, 0.000000, -2.802734, 0), Vector4(0.000000, 0.701476, 0.000000, 0.712694), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(5.496094, 0.000000, -3.645508, 0), Vector4(0.000000, 0.701476, 0.000000, 0.712694), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(5.507812, 0.000000, -4.740234, 0), Vector4(0.000000, 0.701476, 0.000000, 0.712694), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(7.241211, 0.000000, -3.030273, 0), Vector4(0.000000, 0.700866, 0.000000, 0.713293), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(7.224609, 0.000000, -2.180664, 0), Vector4(0.000000, 0.700866, 0.000000, 0.713293), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(7.205078, 0.000000, -1.244141, 0), Vector4(0.000000, 0.700866, 0.000000, 0.713293), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(7.186523, 0.000000, -0.307617, 0), Vector4(0.000000, 0.700866, 0.000000, 0.713293), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(7.170898, 0.000000, 0.453125, 0), Vector4(0.000000, 0.700866, 0.000000, 0.713293), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(7.152344, 0.000000, 1.379883, 0), Vector4(0.000000, 0.700866, 0.000000, 0.713293), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(7.136719, 0.000000, 2.137695, 0), Vector4(0.000000, 0.700866, 0.000000, 0.713293), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(7.118164, 0.000000, 3.064453, 0), Vector4(0.000000, 0.700866, 0.000000, 0.713293), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(7.100586, 0.000000, 3.907227, 0), Vector4(0.000000, 0.700866, 0.000000, 0.713293), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(7.083008, 0.000000, 4.750000, 0), Vector4(0.000000, 0.700866, 0.000000, 0.713293), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(7.062500, 0.000000, 5.760742, 0), Vector4(0.000000, 0.700866, 0.000000, 0.713293), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(7.045898, 0.000000, 6.603516, 0), Vector4(0.000000, 0.700866, 0.000000, 0.713293), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(9.229492, -0.375977, 2.484375, 0), Vector4(0.000000, 0.734266, 0.000000, 0.678862), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(9.184570, -0.349609, 1.601562, 0), Vector4(0.000000, 0.714407, 0.000000, 0.699730), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(9.158203, -0.333984, 0.525391, 0), Vector4(0.000000, 0.714407, 0.000000, 0.699730), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(9.131836, -0.319336, -0.621094, 0), Vector4(0.000000, 0.708316, 0.000000, 0.705896), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(9.697266, -0.646484, -0.514648, 0), Vector4(0.000000, 0.696500, 0.000000, 0.717557), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(9.660156, -0.625000, 0.646484, 0), Vector4(0.000000, 0.696500, 0.000000, 0.717557), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(9.628906, -0.606445, 1.610352, 0), Vector4(0.000000, 0.696500, 0.000000, 0.717557), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(9.597656, -0.588867, 2.574219, 0), Vector4(0.000000, 0.696500, 0.000000, 0.717557), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(8.226562, 0.204102, 2.412109, 0), Vector4(0.000000, 0.707712, 0.000000, 0.706501), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(8.196289, 0.221680, 1.529297, 0), Vector4(0.000000, 0.718070, 0.000000, 0.695971), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(8.166016, 0.239258, 0.646484, 0), Vector4(0.000000, 0.695272, 0.000000, 0.718746), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(8.163086, 0.239258, -0.146484, 0), Vector4(0.000000, 0.695272, 0.000000, 0.718746), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(10.936523, -0.996094, 3.571289, 0), Vector4(0.000000, 0.628645, 0.000000, 0.777692), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(11.228516, -0.999023, 2.233398, 0), Vector4(0.000000, 0.623123, 0.000000, 0.782124), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(11.470703, -0.999023, 1.160156, 0), Vector4(0.000000, 0.616321, 0.000000, 0.787495), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(11.697266, -1.000000, 0.254883, 0), Vector4(0.000000, 0.582818, 0.000000, 0.812603), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(12.038086, -1.000000, -1.927734, 0), Vector4(0.000000, 0.561293, 0.000000, 0.827617), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(11.617188, -1.000000, -3.606445, 0), Vector4(0.000000, 0.490102, 0.000000, 0.871665), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(11.208984, -0.997070, -6.244141, 0), Vector4(0.000000, 0.432832, 0.000000, 0.901475), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(12.798828, -0.997070, -8.377930, 0), Vector4(0.000000, 0.394719, 0.000000, 0.918802), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(14.056641, -0.988281, -8.482422, 0), Vector4(0.000000, 0.375342, 0.000000, 0.926886), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(15.109375, -0.990234, -8.035156, 0), Vector4(0.000000, 0.360017, 0.000000, 0.932946), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(15.846680, -0.956055, -7.341797, 0), Vector4(0.000000, 0.359220, 0.000000, 0.933253), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(16.616211, -0.941406, -6.080078, 0), Vector4(0.000000, 0.359220, 0.000000, 0.933253), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(16.348633, -0.960938, -4.802734, 0), Vector4(0.000000, 0.359220, 0.000000, 0.933253), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(16.219727, -0.989258, -3.340820, 0), Vector4(0.000000, 0.372965, 0.000000, 0.927846), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(16.909180, -0.998047, -1.819336, 0), Vector4(0.000000, 0.382684, 0.000000, 0.923879), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(17.495117, -1.000000, -0.801758, 0), Vector4(0.000000, 0.381895, 0.000000, 0.924206), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(17.625977, -1.000000, 0.288086, 0), Vector4(0.000000, 0.379412, 0.000000, 0.925228), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(17.653320, -0.999023, 1.467773, 0), Vector4(0.000000, 0.379412, 0.000000, 0.925228), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(17.650391, -0.999023, 2.394531, 0), Vector4(0.000000, 0.379412, 0.000000, 0.925228), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(16.774414, -0.999023, 3.898438, 0), Vector4(0.000000, 0.394719, 0.000000, 0.918802), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(15.837891, -0.999023, 3.451172, 0), Vector4(0.000000, 0.406686, 0.000000, 0.913568), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(11.935547, -0.999023, 3.530273, 0), Vector4(0.000000, 0.719343, 0.000000, 0.694655), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(12.021484, -1.000000, 2.523438, 0), Vector4(0.000000, 0.637433, 0.000000, 0.770506), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(12.216797, -1.000000, 1.271484, 0), Vector4(0.000000, 0.636021, 0.000000, 0.771672), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(12.363281, -1.000000, 0.436523, 0), Vector4(0.000000, 0.646139, 0.000000, 0.763220), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(12.514648, -1.000000, -0.474609, 0), Vector4(0.000000, 0.646139, 0.000000, 0.763220), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(12.679688, -1.000000, -1.465820, 0), Vector4(0.000000, 0.646139, 0.000000, 0.763220), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(12.776367, -1.000000, -2.060547, 0), Vector4(0.000000, 0.647442, 0.000000, 0.762114), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(13.583984, -1.000000, -1.511719, 0), Vector4(0.000000, 0.695272, 0.000000, 0.718746), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(13.545898, -1.000000, -0.575195, 0), Vector4(0.000000, 0.695272, 0.000000, 0.718746), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(13.510742, -1.000000, 0.271484, 0), Vector4(0.000000, 0.685115, 0.000000, 0.728435), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(13.436523, -1.000000, 1.283203, 0), Vector4(0.000000, 0.661288, 0.000000, 0.750132), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(13.324219, -1.000000, 2.283203, 0), Vector4(0.000000, 0.661288, 0.000000, 0.750132), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(13.217773, -1.000000, 3.127930, 0), Vector4(0.000000, 0.492335, 0.000000, 0.870406), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(12.405273, -0.999023, 4.224609, 0), Vector4(0.000000, 0.617666, 0.000000, 0.786440), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(13.895508, -1.000000, 4.576172, 0), Vector4(0.000000, 0.711411, 0.000000, 0.702776), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(13.877930, -1.000000, 3.025391, 0), Vector4(0.000000, 0.724159, 0.000000, 0.689633), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(13.821289, -1.000000, 1.918945, 0), Vector4(0.000000, 0.724159, 0.000000, 0.689633), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(13.778320, -1.000000, 1.067383, 0), Vector4(0.000000, 0.724159, 0.000000, 0.689633), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(13.720703, -1.000000, -0.122070, 0), Vector4(0.000000, 0.709521, 0.000000, 0.704684), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(13.723633, -1.000000, -1.216797, 0), Vector4(0.000000, 0.620446, 0.000000, 0.784249), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(15.083008, -1.000000, -2.424805, 0), Vector4(0.000000, 0.691490, 0.000000, 0.722386), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(15.011719, -1.000000, -1.067383, 0), Vector4(0.000000, 0.684492, 0.000000, 0.729021), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(14.942383, -1.000000, 0.038086, 0), Vector4(0.000000, 0.673650, 0.000000, 0.739051), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(14.848633, -1.000000, 0.958984, 0), Vector4(0.000000, 0.647442, 0.000000, 0.762114), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(14.694336, -1.000000, 1.958984, 0), Vector4(0.000000, 0.627315, 0.000000, 0.778766), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(14.316406, -1.000000, 3.759766, 0), Vector4(0.000000, 0.646139, 0.000000, 0.763220), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(14.136719, -1.000000, 4.777344, 0), Vector4(0.000000, 0.648093, 0.000000, 0.761561), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(15.365234, -0.999023, 5.914062, 0), Vector4(0.000000, 0.733686, 0.000000, 0.679489), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(16.544922, -0.993164, 5.899414, 0), Vector4(0.000000, 0.729525, 0.000000, 0.683954), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(17.555664, -0.984375, 5.846680, 0), Vector4(0.000000, 0.727769, 0.000000, 0.685822), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(18.239258, -0.981445, 5.056641, 0), Vector4(0.000000, 0.737242, 0.000000, 0.675629), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(15.166992, -0.999023, 5.020508, 0), Vector4(0.000000, 0.638091, 0.000000, 0.769961), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(15.974609, -1.000000, 2.063477, 0), Vector4(0.000000, 0.692724, 0.000000, 0.721203), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(16.007812, -1.000000, 0.987305, 0), Vector4(0.000000, 0.692724, 0.000000, 0.721203), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(15.991211, -1.000000, -0.083984, 0), Vector4(0.000000, 0.710810, 0.000000, 0.703384), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(15.965820, -1.000000, -1.334961, 0), Vector4(0.000000, 0.710810, 0.000000, 0.703384), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(15.946289, -1.000000, -2.298828, 0), Vector4(0.000000, 0.709521, 0.000000, 0.704684), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(17.052734, -0.950195, -4.571289, 0), Vector4(0.000000, 0.717475, 0.000000, 0.696584), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(17.071289, -0.972656, -3.688477, 0), Vector4(0.000000, 0.712611, 0.000000, 0.701559), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(18.411133, -0.998047, -1.742188, 0), Vector4(0.000000, 0.469432, 0.000000, 0.882969), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(18.609375, -1.000000, -0.671875, 0), Vector4(0.000000, 0.478675, 0.000000, 0.877992), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(18.736328, -1.000000, 0.637695, 0), Vector4(0.000000, 0.477174, 0.000000, 0.878809), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(18.677734, -0.998047, 2.079102, 0), Vector4(0.000000, 0.523977, 0.000000, 0.851732), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(18.099609, -0.997070, 3.191406, 0), Vector4(0.000000, 0.523977, 0.000000, 0.851732), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(17.068359, -0.996094, 4.371094, 0), Vector4(0.000000, 0.578545, 0.000000, 0.815651), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(11.216797, -1.000000, -1.329102, 0), Vector4(0.000000, 0.730109, 0.000000, 0.683331), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(11.129883, -1.000000, -2.483398, 0), Vector4(0.000000, 0.730693, 0.000000, 0.682706), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(11.036133, -1.000000, -3.733398, 0), Vector4(0.000000, 0.730693, 0.000000, 0.682706), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(10.973633, -0.997070, -4.600586, 0), Vector4(0.000000, 0.691490, 0.000000, 0.722386), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(11.029297, -0.996094, -5.754883, 0), Vector4(0.000000, 0.686447, 0.000000, 0.727180), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(12.414062, -0.999023, -6.798828, 0), Vector4(0.000000, 0.646139, 0.000000, 0.763220), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(13.670898, -0.996094, -6.577148, 0), Vector4(0.000000, 0.646791, 0.000000, 0.762667), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(14.743164, -0.977539, -6.385742, 0), Vector4(0.000000, 0.625888, 0.000000, 0.779913), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(17.386719, -0.882812, -6.593750, 0), Vector4(0.000000, 0.705207, 0.000000, 0.709002), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(18.474609, -0.842773, -6.659180, 0), Vector4(0.000000, 0.692107, 0.000000, 0.721795), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(17.284180, -0.883789, -7.663086, 0), Vector4(0.000000, 0.697900, 0.000000, 0.716195), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(16.807617, -0.927734, -8.486328, 0), Vector4(0.000000, 0.803400, 0.000000, 0.595440), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(16.421875, -0.969727, -9.853516, 0), Vector4(0.000000, 0.695448, 0.000000, 0.718577), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(16.768555, -0.957031, -10.831055, 0), Vector4(0.000000, 0.199578, 0.000000, 0.979882), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(15.967773, -0.978516, -11.592773, 0), Vector4(0.000000, 0.144512, 0.000000, 0.989503), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(14.498047, -0.979492, -11.241211, 0), Vector4(0.000000, 0.170429, 0.000000, 0.985370), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(14.269531, -0.979492, -10.201172, 0), Vector4(0.000000, 0.304998, 0.000000, 0.952353), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(14.990234, -0.985352, -9.155273, 0), Vector4(0.000000, 0.285873, 0.000000, 0.958268), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(15.501953, -0.987305, -8.376953, 0), Vector4(0.000000, 0.282479, 0.000000, 0.959274), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(13.879883, -0.991211, -7.924805, 0), Vector4(0.000000, 0.289263, 0.000000, 0.957250), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(15.721680, -0.962891, -5.660156, 0), Vector4(0.000000, 0.258977, 0.000000, 0.965883), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(16.700195, -0.920898, -13.072266, 0), Vector4(0.000000, 0.164411, 0.000000, 0.986392), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(15.121094, -0.977539, -12.809570, 0), Vector4(0.000000, 0.242078, 0.000000, 0.970257), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(13.998047, -0.985352, -12.214844, 0), Vector4(0.000000, 0.250596, 0.000000, 0.968092), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(14.984375, -0.980469, -10.783203, 0), Vector4(0.000000, 0.278378, 0.000000, 0.960472), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(15.528320, -0.983398, -9.746094, 0), Vector4(0.000000, 0.263219, 0.000000, 0.964736), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(13.526367, -0.981445, -10.891602, 0), Vector4(0.000000, 0.293350, 0.000000, 0.956005), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(13.300781, -0.990234, -9.607422, 0), Vector4(0.000000, 0.286691, 0.000000, 0.958023), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(12.030273, -0.999023, -9.413086, 0), Vector4(0.000000, 0.295917, 0.000000, 0.955214), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(11.541992, -1.000000, -8.149414, 0), Vector4(0.000000, 0.295917, 0.000000, 0.955214), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(12.947266, -0.997070, -7.653320, 0), Vector4(0.000000, 0.300112, 0.000000, 0.953904), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(10.963867, -1.000000, -7.229492, 0), Vector4(0.000000, 0.334030, 0.000000, 0.942562), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(10.076172, -0.996094, -6.055664, 0), Vector4(0.000000, 0.506190, 0.000000, 0.862422), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(15.527344, -0.977539, -13.900391, 0), Vector4(0.000000, 0.258977, 0.000000, 0.965883), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(14.756836, -0.983398, -13.706055, 0), Vector4(0.000000, 0.122979, 0.000000, 0.992409), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(13.602539, -0.994141, -13.404297, 0), Vector4(0.000000, 0.141129, 0.000000, 0.989991), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(12.622070, -0.997070, -13.118164, 0), Vector4(0.000000, 0.153203, 0.000000, 0.988195), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(11.729492, -1.000000, -12.840820, 0), Vector4(0.000000, 0.153203, 0.000000, 0.988195), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(10.759766, -1.000000, -12.525391, 0), Vector4(0.000000, 0.181604, 0.000000, 0.983372), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(12.780273, -0.989258, -11.810547, 0), Vector4(0.000000, 0.294984, 0.000000, 0.955502), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(12.051758, -0.999023, -11.304688, 0), Vector4(0.000000, 0.300112, 0.000000, 0.953904), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(12.654297, -0.995117, -10.420898, 0), Vector4(0.000000, 0.300112, 0.000000, 0.953904), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(10.814453, -1.000000, -10.719727, 0), Vector4(0.000000, 0.317527, 0.000000, 0.948249), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(11.444336, -1.000000, -9.978516, 0), Vector4(0.000000, 0.353631, 0.000000, 0.935385), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(10.647461, -1.000000, -9.255859, 0), Vector4(0.000000, 0.385277, 0.000000, 0.922801), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(10.217773, -1.000000, -8.375000, 0), Vector4(0.000000, 0.422792, 0.000000, 0.906227), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(9.967773, -0.999023, -7.439453, 0), Vector4(0.000000, 0.422792, 0.000000, 0.906227), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(9.591797, -0.975586, -5.014648, 0), Vector4(0.000000, 0.425886, 0.000000, 0.904777), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(9.660156, -0.983398, -3.541992, 0), Vector4(0.000000, 0.478140, 0.000000, 0.878284), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(9.766602, -0.993164, -2.364258, 0), Vector4(0.000000, 0.456448, 0.000000, 0.889750), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(10.466797, -1.000000, -0.356445, 0), Vector4(0.000000, 0.468138, 0.000000, 0.883655), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(8.597656, -0.958984, -2.703125, 0), Vector4(0.000000, 0.655499, 0.000000, 0.755196), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(8.769531, -0.943359, -4.132812, 0), Vector4(0.000000, 0.617186, 0.000000, 0.786817), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(8.663086, -0.940430, -5.183594, 0), Vector4(0.000000, 0.601994, 0.000000, 0.798500), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(9.081055, -0.982422, -6.147461, 0), Vector4(0.000000, 0.476530, 0.000000, 0.879158), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(9.081055, -0.982422, -6.147461, 0), Vector4(0.000000, 0.476530, 0.000000, 0.879158), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(13.430664, -0.997070, -14.432617, 0), Vector4(0.000000, 0.097866, 0.000000, 0.995200), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(11.812500, -1.000000, -14.032227, 0), Vector4(0.000000, 0.139316, 0.000000, 0.990248), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(10.969727, -1.000000, -13.774414, 0), Vector4(0.000000, 0.158388, 0.000000, 0.987377), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(10.039062, -1.000000, -13.463867, 0), Vector4(0.000000, 0.158388, 0.000000, 0.987377), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(9.502930, -1.000000, -12.154297, 0), Vector4(0.000000, 0.228553, 0.000000, 0.973532), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(10.021484, -1.000000, -11.216797, 0), Vector4(0.000000, 0.254022, 0.000000, 0.967199), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(9.086914, -1.000000, -10.671875, 0), Vector4(0.000000, 0.313357, 0.000000, 0.949636), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(9.653320, -1.000000, -9.881836, 0), Vector4(0.000000, 0.310805, 0.000000, 0.950474), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(8.615234, -0.987305, -8.078125, 0), Vector4(0.000000, 0.531753, 0.000000, 0.846900), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(8.698242, -0.993164, -9.383789, 0), Vector4(0.000000, 0.494989, 0.000000, 0.868899), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(7.958984, -0.968750, -7.043945, 0), Vector4(0.000000, 0.437887, 0.000000, 0.899030), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(7.341797, -0.972656, -8.239258, 0), Vector4(0.000000, 0.463602, 0.000000, 0.886044), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(7.229492, -0.981445, -9.481445, 0), Vector4(0.000000, 0.490422, 0.000000, 0.871485), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(6.294922, -0.931641, -8.046875, 0), Vector4(0.000000, 0.411142, 0.000000, 0.911571), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(6.329102, -0.866211, -6.984375, 0), Vector4(0.000000, 0.445772, 0.000000, 0.895147), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(6.125000, -0.977539, -10.054688, 0), Vector4(0.000000, 0.353060, 0.000000, 0.935601), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(5.523438, -0.980469, -11.592773, 0), Vector4(0.000000, 0.301043, 0.000000, 0.953610), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(4.574219, -0.972656, -10.975586, 0), Vector4(0.000000, 0.289380, 0.000000, 0.957214), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(5.382812, -0.978516, -10.797852, 0), Vector4(0.000000, 0.296966, 0.000000, 0.954888), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(6.473633, -0.970703, -9.084961, 0), Vector4(0.000000, 0.296150, 0.000000, 0.955141), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(9.201172, -0.988281, -7.173828, 0), Vector4(0.000000, 0.283532, 0.000000, 0.958963), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(5.939453, -0.991211, -12.888672, 0), Vector4(0.000000, 0.203166, 0.000000, 0.979144), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(4.718750, -0.970703, -12.373047, 0), Vector4(0.000000, 0.221892, 0.000000, 0.975071), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(3.417969, -0.964844, -11.741211, 0), Vector4(0.000000, 0.240538, 0.000000, 0.970640), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(3.402344, -0.956055, -13.929688, 0), Vector4(0.000000, 0.238879, 0.000000, 0.971049), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(4.226562, -0.965820, -14.422852, 0), Vector4(0.000000, 0.232947, 0.000000, 0.972489), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(4.857422, -0.975586, -13.328125, 0), Vector4(0.000000, 0.272628, 0.000000, 0.962120), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(3.665039, -0.962891, -12.613281, 0), Vector4(0.000000, 0.352261, 0.000000, 0.935902), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(6.843750, -0.996094, -14.041016, 0), Vector4(0.000000, 0.273450, 0.000000, 0.961886), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(7.956055, -0.999023, -14.793945, 0), Vector4(0.000000, 0.278495, 0.000000, 0.960438), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(9.284180, -1.000000, -14.115234, 0), Vector4(0.000000, 0.186883, 0.000000, 0.982382), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(10.923828, -1.000000, -11.858398, 0), Vector4(0.000000, 0.335870, 0.000000, 0.941908), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(13.128906, -0.993164, -12.771484, 0), Vector4(0.000000, 0.221059, 0.000000, 0.975260), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(15.145508, -0.497070, -15.574219, 0), Vector4(0.000000, 0.102359, 0.000000, 0.994748), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(14.365234, -0.438477, -15.648438, 0), Vector4(0.000000, 0.057098, 0.000000, 0.998369), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(13.579102, -0.448242, -15.631836, 0), Vector4(0.000000, 0.016967, 0.000000, 0.999856), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(12.600586, -0.467773, -15.598633, 0), Vector4(0.000000, 0.028317, 0.000000, 0.999599), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(11.816406, -0.491211, -15.557617, 0), Vector4(0.000000, 0.034417, 0.000000, 0.999407), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(15.154297, -0.210938, -16.071289, 0), Vector4(0.000000, 0.012695, 0.000000, 0.999919), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(14.369141, -0.207031, -16.048828, 0), Vector4(0.000000, 0.013549, 0.000000, 0.999908), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(13.501953, -0.237305, -15.997070, 0), Vector4(0.000000, 0.080601, 0.000000, 0.996746), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(12.646484, -0.211914, -16.038086, 0), Vector4(0.000000, 0.131817, 0.000000, 0.991274), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(11.774414, -0.272461, -15.936523, 0), Vector4(0.000000, 0.069280, 0.000000, 0.997597), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(11.862305, -0.024414, -16.364258, 0), Vector4(0.000000, 0.033563, 0.000000, 0.999436), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(12.729492, -0.001953, -16.403320, 0), Vector4(0.000000, 0.028317, 0.000000, 0.999599), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(13.500977, 0.012695, -16.430664, 0), Vector4(0.000000, 0.027462, 0.000000, 0.999623), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(14.368164, 0.030273, -16.460938, 0), Vector4(0.000000, 0.022215, 0.000000, 0.999753), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(15.236328, 0.027344, -16.484375, 0), Vector4(0.000000, 0.031001, 0.000000, 0.999519), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(10.227539, -1.000000, -14.718750, 0), Vector4(0.000000, 0.148255, 0.000000, 0.988949), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(11.055664, -1.000000, -14.964844, 0), Vector4(0.000000, 0.104909, 0.000000, 0.994482), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(9.564453, -1.000000, -15.723633, 0), Vector4(0.000000, 0.174877, 0.000000, 0.984590), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(8.309570, -1.000000, -13.852539, 0), Vector4(0.000000, 0.183524, 0.000000, 0.983015), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(8.891602, -1.000000, -13.083984, 0), Vector4(0.000000, 0.237219, 0.000000, 0.971456), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(8.813477, -1.000000, -15.131836, 0), Vector4(0.000000, 0.143908, 0.000000, 0.989591), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(8.214844, -1.000000, -16.357422, 0), Vector4(0.000000, 0.167180, 0.000000, 0.985926), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(7.473633, -0.999023, -16.092773, 0), Vector4(0.000000, 0.167180, 0.000000, 0.985926), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(7.993164, -0.999023, -15.578125, 0), Vector4(0.000000, 0.215103, 0.000000, 0.976591), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(9.017578, -1.000000, -16.034180, 0), Vector4(0.000000, 0.181724, 0.000000, 0.983350), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(6.216797, -0.998047, -16.222656, 0), Vector4(0.000000, 0.124917, 0.000000, 0.992167), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(6.481445, -0.998047, -15.282227, 0), Vector4(0.000000, 0.155977, 0.000000, 0.987761), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(7.215820, -0.999023, -15.515625, 0), Vector4(0.000000, 0.151635, 0.000000, 0.988437), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(7.392578, -0.998047, -14.850586, 0), Vector4(0.000000, 0.140404, 0.000000, 0.990094), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(5.995117, -0.996094, -14.375977, 0), Vector4(0.000000, 0.207467, 0.000000, 0.978242), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(5.529297, -0.990234, -15.283203, 0), Vector4(0.000000, 0.227840, 0.000000, 0.973699), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(5.188477, -0.986328, -15.961914, 0), Vector4(0.000000, 0.210809, 0.000000, 0.977527), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(4.044922, -0.968750, -16.234375, 0), Vector4(0.000000, 0.200655, 0.000000, 0.979662), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(4.380859, -0.971680, -15.528320, 0), Vector4(0.000000, 0.228790, 0.000000, 0.973476), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(4.883789, -0.977539, -14.582031, 0), Vector4(0.000000, 0.269338, 0.000000, 0.963046), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(5.378906, -0.983398, -13.741211, 0), Vector4(0.000000, 0.274389, 0.000000, 0.961619), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(6.478516, -0.994141, -13.432617, 0), Vector4(0.000000, 0.254140, 0.000000, 0.967167), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(3.785156, -0.960938, -15.136719, 0), Vector4(0.000000, 0.391913, 0.000000, 0.920002), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(2.947266, -0.950195, -14.621094, 0), Vector4(0.000000, 0.339892, 0.000000, 0.940465), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(2.688477, -0.949219, -13.389648, 0), Vector4(0.000000, 0.343219, 0.000000, 0.939255), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(2.431641, -0.957031, -12.153320, 0), Vector4(0.000000, 0.348945, 0.000000, 0.937143), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(2.623047, -0.965820, -10.865234, 0), Vector4(0.000000, 0.353859, 0.000000, 0.935299), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(3.760742, -0.959961, -10.289062, 0), Vector4(0.000000, 0.399872, 0.000000, 0.916571), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(1.822266, -0.928711, -14.592773, 0), Vector4(0.000000, 0.480603, 0.000000, 0.876938), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(2.303711, -0.944336, -15.466797, 0), Vector4(0.000000, 0.343219, 0.000000, 0.939255), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(2.933594, -0.954102, -16.061523, 0), Vector4(0.000000, 0.361156, 0.000000, 0.932505), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(7.948242, 0.459961, -11.445312, 0), Vector4(0.000000, 0.336675, 0.000000, 0.941621), Vector4(13.000000, 13.000000, 13.000000, 13.000000));
	pachipachi(Vector4(13.612305, 0.979492, -4.360352, 0), Vector4(0.000000, 0.428535, 0.000000, 0.903525), Vector4(3.000000, 3.000000, 3.000000, 3.000000));
	pachipachi(Vector4(28.244141, 6.526367, 10.584961, 0), Vector4(0.000000, 0.678596, 0.000000, 0.734512), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(60.625000, -1.544922, 0.541992, 0), Vector4(0.000000, 0.687689, 0.000000, 0.726006), Vector4(1.500000, 1.500000, 1.500000, 1.500000));
	pachipachi(Vector4(71.600586, -1.942383, -2.433594, 0), Vector4(0.000000, 0.493079, 0.000000, 0.869985), Vector4(1.000000, 1.000000, 1.000000, 1.000000));
	pachipachi(Vector4(63.937038, 0.702178, 5.598306, 0), Vector4(0.014467, 0.826608, -0.005320, 0.562567), Vector4(0.700000, 0.700000, 0.700000, 0.700000));
	pachipachi(Vector4(47.416016, 0.471680, 8.882812, 0), Vector4(0.000000, 0.803400, 0.000000, 0.595440), Vector4(1.000000, 1.000000, 1.000000, 1.000000));

}

std::map<state_replicator::playerid, std::pair<Entity*, Entity*>> _awful_server_entities;

struct demo_lobbyview {
	__int64 map_id;
	Entity* ent;
};
struct demo_move {
	enum class typ {
		switch_map,
		camera_move,
		preload,
		join_game,
		wait_1s,
		play_welcome,
		spawn_lineups,
		change_music
	};
	typ type;
	std::map<double, cammove>* move;
	int mapindex;
};
demo_lobbyview s_demo_lobbyviews[] = {
	demo_lobbyview{ 0x80000000000005b, nullptr }, //0 Anubis
	demo_lobbyview{ 0x800000000000184, nullptr }, //1 Watchpoint
	demo_lobbyview{ 0x8000000000002af, nullptr }, //2 Hollywood
	demo_lobbyview{ 0x8000000000002c3, nullptr }, //3 Dorado
	demo_lobbyview{ 0x8000000000001d4, nullptr }, //4 Numbani
	demo_lobbyview{ 0x8000000000000d4, nullptr }, //5 Kings Row
	demo_lobbyview{ 0x800000000000165, nullptr }, //6 Hanamura
	demo_lobbyview{ 0x8000000000001db, nullptr }  //7 Volskaya
};
auto watchpoint_static_pos = std::map<double, cammove>{
	{ 0, cammove(Vector4(-14.808542, 1.334642, -158.170334, 0), Vector4(0.615470, 0.022686, 0.787834, 0))},
	{ 1, cammove(Vector4(-14.808542, 1.334642, -158.170334, 0), Vector4(0.615470, 0.022686, 0.787834, 0))},
	//{ 50000, cammove(Vector4(-9.047516, 1.845441, -150.246689, 0), Vector4(0.500749, 0.054075, 0.863902, 0))},
	{ 3, cammove(Vector4(-9.047516, 1.845441, -150.246689, 0), Vector4(0.500749, 0.054075, 0.863902, 0))},
	{ 6, cammove(Vector4(0.074877, 7.994227, -141.168823, 0), Vector4(0.435241, -0.083772, 0.896408, 0))},
	{ 10, cammove(Vector4(6.267166, 7.839251, -146.952255, 0), Vector4(0.249528, -0.082033, 0.964887, 0))},
	{ 13, cammove(Vector4(8.284057, 7.592375, -152.224564, 0), Vector4(0.991530, -0.057660, -0.116376, 0))},
	{ 16, cammove(Vector4(11.941032, 7.483008, -152.943985, 0), Vector4(0.724711, 0.041773, 0.687786, 0))},
	//{ 16, cammove(Vector4(11.941032, 7.483008, -152.943985, 0), Vector4(0.724711, 0.041773, 0.687786, 0))},
};
demo_move s_demo_moves[] = {
	demo_move{ demo_move::typ::preload, nullptr, 0 },

	demo_move{ demo_move::typ::switch_map, nullptr, 1 },
	demo_move{ demo_move::typ::spawn_lineups, nullptr, 0 },
	demo_move{ demo_move::typ::camera_move, &watchpoint_static_pos, 0 },

	//demo_move{ demo_move::typ::wait_1s, nullptr, 0 },
	//demo_move{ demo_move::typ::play_welcome, nullptr, 0 },

	demo_move{ demo_move::typ::wait_1s, nullptr, 0 },

	demo_move{ demo_move::typ::switch_map, nullptr, 0 },
	demo_move{ demo_move::typ::camera_move, &anubis_1, 0 },
	//demo_move{ demo_move::typ::camera_move, &anubis_2, 0 },

	//demo_move{ demo_move::typ::switch_map, nullptr, 1 },
	//demo_move{ demo_move::typ::camera_move, &watchpoint_1, 0 },
	//demo_move{ demo_move::typ::camera_move, &watchpoint_2, 0 },
	//demo_move{ demo_move::typ::camera_move, &watchpoint_3, 0 },
	//demo_move{ demo_move::typ::camera_move, &hollywood_2, 0 },

	demo_move{ demo_move::typ::switch_map, nullptr, 3 },
	//demo_move{ demo_move::typ::camera_move, &dorado_1, 0 },
	demo_move{ demo_move::typ::camera_move, &dorado_2, 0 },

	demo_move{ demo_move::typ::switch_map, nullptr, 4 },
	demo_move{ demo_move::typ::camera_move, &numbani_1, 0 },
	//demo_move{ demo_move::typ::camera_move, &numbani_2, 0 },

	demo_move{ demo_move::typ::switch_map, nullptr, 6 },
	//demo_move{ demo_move::typ::camera_move, &hanamura_1, 0 },
	demo_move{ demo_move::typ::camera_move, &hanamura_2, 0 },

	demo_move{ demo_move::typ::switch_map, nullptr, 2 },
	demo_move{ demo_move::typ::camera_move, &hollywood_1, 0 },

	demo_move{ demo_move::typ::switch_map, nullptr, 7 },
	demo_move{ demo_move::typ::camera_move, &volskaya_1, 0 },

	demo_move{ demo_move::typ::switch_map, nullptr, 5 },
	//demo_move{ demo_move::typ::camera_move, &kingsrow_1, 0 },
	demo_move{ demo_move::typ::change_music, nullptr, 0 },
	demo_move{ demo_move::typ::camera_move, &kingsrow_2, 0 },
	//demo_move{ demo_move::typ::camera_move, &volskaya_2, 0 },
	//demo_move{ demo_move::typ::camera_move, &volskaya_3, 0 },

	demo_move{ demo_move::typ::join_game, nullptr, 0 }
};
//volskaya zu lang, musik bevor kr
struct lineup {
	__int64 hero;
	Vector4 position;
	Vector4 rotation;
};
auto s_lineups = std::vector<lineup>{
	lineup(0x400000000000dd7, Vector4(19.110352, -5.095703, -88.195312, 0), Vector4(0.000000, 0.993958, 0.000000, 0)),
	lineup(0x40000000000063c, Vector4(-12.725586, 0.085938, -152.776367, 0), Vector4(0.000000, 0.996279, 0.000000, 0)),
	lineup(0x400000000000dce, Vector4(-9.442383, 0.316406, -145.820312, 0), Vector4(0.000000, 0.994236, 0.000000, 0)),
	lineup(0x40000000000086d, Vector4(-6.450195, 2.524414, -142.608398, 0), Vector4(0.000000, 0.990009, 0.000000, 0)),
	lineup(0x400000000000dd5, Vector4(-5.743164, 2.032227, -144.719727, 0), Vector4(0.000000, 0.970287, 0.000000, 0)),
	lineup(0x400000000000ddf, Vector4(5.125977, 6.073242, -141.152344, 0), Vector4(0.000000, 0.920815, 0.000000, 0)),
	lineup(0x400000000000dd9, Vector4(-11.636719, 0.080078, -149.741211, 0), Vector4(0.000000, 0.998717, 0.000000, 0)),
	lineup(0x400000000000ddb, Vector4(11.440430, 6.112305, -153.666992, 0), Vector4(0.000000, 0.375229, 0.000000, 0)),
	lineup(0x400000000000dde, Vector4(-7.588867, 0.092773, -150.149414, 0), Vector4(0.000000, 0.890197, 0.000000, 0)),
	lineup(0x400000000000dd4, Vector4(-8.099609, 1.330078, -144.375000, 0), Vector4(0.000000, 0.991657, 0.000000, 0)),
	lineup(0x400000000000ddd, Vector4(-2.491211, 5.317383, -138.779297, 0), Vector4(0.000000, 0.984183, 0.000000, 0)),
	lineup(0x400000000000dd0, Vector4(-7.530273, 0.688477, -146.667969, 0), Vector4(0.000000, 0.970287, 0.000000, 0)),
	lineup(0x400000000000ddc, Vector4(-5.279297, 3.378906, -141.364258, 0), Vector4(0.000000, 0.984804, 0.000000, 0)),
	lineup(0x400000000000dd8, Vector4(2.912109, 6.102539, -138.940430, 0), Vector4(0.000000, 0.961486, 0.000000, 0)),
	lineup(0x400000000000dcf, Vector4(-8.442383, 0.119141, -152.231445, 0), Vector4(0.000000, -0.839088, 0.000000, 0)),
	lineup(0x400000000000dd2, Vector4(-3.981445, 4.208984, -140.291992, 0), Vector4(0.000000, 0.975126, 0.000000, 0)),
	lineup(0x400000000000dd6, Vector4(0.616211, 6.078125, -136.959961, 0), Vector4(0.000000, 0.978721, 0.000000, 0)),
	lineup(0x400000000000dda, Vector4(-9.895508, 0.076172, -153.852539, 0), Vector4(0.000000, 0.958059, 0.000000, 0)),
	lineup(0x400000000000dd3, Vector4(-3.987305, 3.366211, -142.756836, 0), Vector4(0.000000, 0.961486, 0.000000, 0)),
	lineup(0x400000000000dd1, Vector4(6.980469, 6.061523, -143.701172, 0), Vector4(0.000000, 0.930375, 0.000000, 0)),
	lineup(0x4000000000012f5, Vector4(-2.083008, 4.671875, -140.976562, 0), Vector4(0.000000, 0.956042, 0.000000, 0)),
};

int _curr_demomove = -1;
double _demomove_starttime = 0;
int _curr_lobbymap = -1;

Component_54_Lobbymap* (*origSwitchCam)();
Component_54_Lobbymap* hookSwitchCam() {
	if (_curr_lobbymap != -1) {
		auto& mapst = s_demo_lobbyviews[_curr_lobbymap];
		if (mapst.ent != nullptr) {
			auto replacement = mapst.ent->getById<Component_54_Lobbymap>(0x54);
			return replacement;
			//origSwitchCam(replacement); //0xce6da0 0xc45400
		}
	}
	return LobbyEntityAdmin()->getSingletonComponent<Component_54_Lobbymap>(0x54);
}


void PrometheusSystem::state_replicator_do() {
	if (state_replicator::is_connected) {
		while (true) {
			auto update = state_replicator::get_outstanding_message();
			if (update->type == state_replicator::MsgBase::MessageType::None)
				break;
			switch (update->type) {
			case state_replicator::MsgBase::MessageType::ChangeHero: {
				auto msg = dynamic_cast<state_replicator::ChangeHeroMessage*>(update.get());
				if (msg->player_id == state_replicator::local_playerid)
					continue;
				auto player = _awful_server_entities.find(msg->player_id);
				if (player != _awful_server_entities.end()) {
					_game_ea->delEnt(player->second.first);
					_game_ea->delEnt(player->second.second);
				}
				auto hero = stu_resources::GetByID(msg->heroid);
				owassert(hero);
				auto model_entid = hero->to_editable().get_argument_resource("m_gameplayEntity")->resource_id;
				player_spawner spawn(model_entid);
				spawn.controller_info.heroid = model_entid;
				spawn.controller_info.load_2f_33 = false;
				spawn.controller_info.set_localent = false;
				spawn.model_info.skin_theme_id = msg->skinid;
				_awful_server_entities[msg->player_id] = spawn.spawn();
				printf("spawned hero %llx for ent %s\n", msg->heroid, msg->player_id.c_str());
			}
																   break;
			case state_replicator::MsgBase::MessageType::JoinInstance: {
				auto msg = dynamic_cast<state_replicator::JoinInstanceMessage*>(update.get());
				if (msg->player_id == state_replicator::local_playerid)
					continue;
				printf("Player joined: %s (%s)\n", msg->player_id.c_str(), msg->name.c_str());
			}
																	 break;
			case state_replicator::MsgBase::MessageType::LeaveInstance: {
				auto msg = dynamic_cast<state_replicator::LeaveInstanceMessage*>(update.get());
				if (msg->player_id == state_replicator::local_playerid)
					continue;
				auto player = _awful_server_entities.find(msg->player_id);
				if (player != _awful_server_entities.end()) {
					_game_ea->delEnt(player->second.first);
					_game_ea->delEnt(player->second.second);
				}
				printf("Player left: %s (%s)\n", msg->player_id.c_str());
			}
																	  break;
			case state_replicator::MsgBase::MessageType::PositionUpdate: {
				auto msg = dynamic_cast<state_replicator::PositionUpdateMessage*>(update.get());
				if (msg->player_id == state_replicator::local_playerid)
					continue;
				MovementState state = msg->data.get<MovementState>();
				if (state.command_frame == -1)
					continue;
				auto player = _awful_server_entities.find(msg->player_id);
				if (player != _awful_server_entities.end()) {
					auto comp12 = player->second.second->getById<Component_12_STUMovementStateComponent>(0x12);
					auto result = comp12->PasteMovementState(&state);
					//printf("%p (%d) %d - %f %f %f\n", comp12, result, state.command_frame, state.absolute_position.X, state.absolute_position.Y, state.absolute_position.Z);
				}
				else {
					printf("Unable to find hero %s locally!\n", msg->player_id.c_str());
				}
			}
																	   break;
			}
		}

		Entity* local_controller = _game_ea->getLocalEnt();
		Entity* local_model = nullptr;

		if (local_controller) {
			auto pet_controller = local_controller->getById<Component_20_ModelReference>(0x20);
			if (pet_controller) {
				local_model = _game_ea->getEntById(pet_controller->cam_attach_entid);
			}
		}
		if (local_model) {
			auto comp15 = local_model->getById<Component_15_STUCharacterMoverComponent>(0x15);
			state_replicator::emplace_positon_update(&comp15->movement_state_2);
		}
	}
	else {
		for (auto ent : _awful_server_entities) {
			_game_ea->delEnt(ent.second.first);
			_game_ea->delEnt(ent.second.second);
		}
	}
}

void PrometheusSystem::state_replicator_exhandled() {
	__try {
		state_replicator_do();
	}
	__except (EXCEPTION_EXECUTE_HANDLER) {
		printf("state replicator exception\n");
	}
}


void PrometheusSystem::OnTick(float tick) {
	Entity* local_controller = _game_ea->getLocalEnt();
	Entity* local_model = nullptr;

	if (local_controller) {
		auto pet_controller = local_controller->getById<Component_20_ModelReference>(0x20);
		if (pet_controller) {
			local_model = _game_ea->getEntById(pet_controller->cam_attach_entid);
			if (local_model) {
				auto ss = local_model->getById<Component_23_Statescript>(0x23);
				auto health_stru = local_model->getById<Component_28_STUHealthComponent>(0x28);

				float health = health_stru->vfptr->GetFullCurrentHealth(health_stru);
				float health_max = health_stru->vfptr->GetFullMaxHealth(health_stru);

				StatescriptPrimitive health_cv{};
				health_cv.type = StatescriptPrimitive_FLT;

				*(float*)&health_cv.value = health;
				ss->ss_inner.rid_entity_varbag->SetVar({ StatescriptVar_ENTITY_VARBAG, 0x0D800000000006C4 }, health_cv);

				*(float*)&health_cv.value = health_max;
				ss->ss_inner.rid_entity_varbag->SetVar({ StatescriptVar_ENTITY_VARBAG, 0x0D800000000006C9 }, health_cv);

				StatescriptPrimitive wpn_1{};
				wpn_1.type = StatescriptPrimitive_INT;
				wpn_1.value = 1;
				ss->ss_inner.rid_entity_varbag->SetArray({ 0x0D8000000000001D }, wpn_1, wpn_1, 0);
			}
		}
	}

	if (globals::isDemo) {
		if (!_applied_demo) {
			_applied_demo = true;

			MH_VERIFY(MH_CreateHook((PVOID)(globals::gameBase + 0x8537c0), get_displayString_func, (PVOID*)&get_displayString_orig));
			MH_VERIFY(MH_EnableHook((PVOID)(globals::gameBase + 0x8537c0)));

			MH_VERIFY(MH_CreateHook((PVOID)(globals::gameBase + 0xc87220), play_game_btn, (PVOID*)0));
			MH_VERIFY(MH_EnableHook((PVOID)(globals::gameBase + 0xc87220)));

			MH_VERIFY(MH_CreateHook((PVOID)(globals::gameBase + 0xd774b0), SendHeroSelection, (PVOID*)0));
			MH_VERIFY(MH_EnableHook((PVOID)(globals::gameBase + 0xd774b0)));

			MH_VERIFY(MH_CreateHook((PVOID)(globals::gameBase + 0xd94930), matchmaking_cv, (PVOID*)0));
			MH_VERIFY(MH_EnableHook((PVOID)(globals::gameBase + 0xd94930)));

			MH_VERIFY(MH_CreateHook((PVOID)(globals::gameBase + 0xc45400), hookSwitchCam, (PVOID*)&origSwitchCam));
			MH_VERIFY(MH_EnableHook((PVOID)(globals::gameBase + 0xc45400)));

			auto lobby_ss = LobbyEntityAdmin()->getSingletonComponent<Component_23_Statescript>(0x23);
			lobby_ss->ss_inner.getByResourceId(0x58000000000041a)->StartStopState(9, true); //developer mode

			//*(char*)(globals::gameBase + 0x1859db4) = 1; //tank_showMode
			//*(char*)(globals::gameBase + 0x1859dcc) = 1; //feature flag 11 (developer mode?)

			//0xc87220

			auto settings = LobbyEntityAdmin()->getSingletonComponent<Component_53_Settings>(0x53);
			settings->tutorial_dialog_dismissed = 1;
		}

		if (demo_join_game) {
			//1: searching
			//2: match found
			//3: joining game
			auto matchmake_info_comp = (__int64)LobbyEntityAdmin()->getSingletonComponent<__int64>(0x56);
			if (*(int*)(matchmake_info_comp + 0x20) == 0) {
				*(int*)(matchmake_info_comp + 0x20) = 1;
			}
			if (_curr_demomove == -1)
				_curr_demomove = 0;
			if (_demomove_starttime == 0)
				_demomove_starttime = GetGameRuntimeSecs();
			auto& demomove = s_demo_moves[_curr_demomove];
			//static std::vector<Component_1_SceneRendering*> test{};
			if (demomove.type == demo_move::typ::preload) {
				auto lobby_ss = LobbyEntityAdmin()->getSingletonComponent<Component_23_Statescript>(0x23);
				auto map_ss = lobby_ss->ss_inner.getByResourceId(0x580000000000b47);
				if (map_ss)
					map_ss->Stop();
				auto vmroot = GetViewModelRoot();
				bool all_loaded = true;
				int loaded_cnt = 0;
				for (int i = 0; i < 8; i++) {
					auto& map = s_demo_lobbyviews[i];
					if (map.ent == nullptr) {
						auto spawn = EntityLoader::Create(0, 0, false, false);
						spawn->loader_entries[0x54].component_id = 0x54;
						auto ent = spawn->Spawn(LobbyEntityAdmin());
						auto comp54 = ent->getById<Component_54_Lobbymap>(0x54);
						if (!comp54) {
							printf("Comp54 failed!\n");
						}
						else {
							comp54->LoadMap(map.map_id);
						}
						map.ent = ent;
						_curr_lobbymap = i;
					}
					auto comp54 = map.ent->getById<Component_54_Lobbymap>(0x54);
					if (comp54->GetMapLoadState() != 4) {
						all_loaded = false;
						loaded_cnt = i;
						break;
					}
				}
				for (auto vm : vmroot->viewmodel_list) {
					auto name = vm->vfptr->GetName();
					if (!strcmp(name, "LobbyMainMenuVM")) {
						auto play_enabled = vm->getByKey(0x99363eb);
						if (play_enabled) {
							play_enabled->property.has_value = true;
							string_rep* str = (string_rep*)play_enabled->property.value;
							str->extend_to(64);
							if (all_loaded) {
								str->actual_size = 0;
							}
							else {
								strcpy(str->get(), std::format("Load Demo {:d}/8", loaded_cnt + 1).c_str());
							}
							SendViewModelPropUpdate(vm, play_enabled);
						}
					}
				}
				if (all_loaded) {
					*(int*)(matchmake_info_comp + 0x20) = 2;
					lobby_ss->ss_inner.getByResourceId(0x5800000000001e5)->ExecuteNode(87); //POTG music
					auto ss = lobby_ss->ss_inner.getByResourceId(0x5800000000002d8); //Chat
					if (ss)
						ss->Stop();
					ss = lobby_ss->ss_inner.getByResourceId(0x580000000000158); //Lobby Menu
					if (ss)
						ss->Stop();
					ss = lobby_ss->ss_inner.getByResourceId(0x580000000000138); //Social Menu
					if (ss)
						ss->Stop();
					_curr_demomove++;
					_demomove_starttime = 0;
				}
			}
			else if (demomove.type == demo_move::typ::join_game) {
				_curr_lobbymap = -1;
				for (int i = 0; i < 8; i++) {
					auto& map = s_demo_lobbyviews[i];
					LobbyEntityAdmin()->delEnt(map.ent);
					map.ent = nullptr;
				}
				auto lobby_ss = LobbyEntityAdmin()->getSingletonComponent<Component_23_Statescript>(0x23);
				lobby_ss->ss_inner.getByResourceId(0x58000000000041a)->StartStopState(7, true); //For "Welcome to Overwatch"
				printf("Demo Finished!\n");
				*(int*)(matchmake_info_comp + 0x20) = 3;

				lobby_ss->ss_inner.getByResourceId(0x5800000000001e5)->graph->m_nodes.list()[91]->graph_node.base.to_editable().get_argument_object("m_outPlug").get_argument_objectlist("m_links").value->set_count(0);

				auto world = get_system27_WorldEngineSystem(GameEntityAdmin());
				world->wanted_map_id = 0x800000000000165; //Hanamura
				world->world_state = 2;

				demo_join_game = false;
			}
			else if (demomove.type == demo_move::typ::play_welcome) {
				auto lobby_ss = LobbyEntityAdmin()->getSingletonComponent<Component_23_Statescript>(0x23);
				auto inst = lobby_ss->ss_inner.getByResourceId(0x5800000000004f6);
				if (inst) {
					inst->ExecuteNode(1); //"Welcome to Overwatch"
				}
				_curr_demomove++;
				_demomove_starttime = 0;
			}
			else if (demomove.type == demo_move::typ::switch_map) {
				_curr_lobbymap = demomove.mapindex;
				_curr_demomove++;
				_demomove_starttime = 0;
			}
			else if (demomove.type == demo_move::typ::change_music) {
				auto lobby_ss = LobbyEntityAdmin()->getSingletonComponent<Component_23_Statescript>(0x23);
				lobby_ss->ss_inner.getByResourceId(0x5800000000001e5)->ExecuteNode(5); //29 start match music
				_curr_demomove++;
				_demomove_starttime = 0;
			}
			else if (demomove.type == demo_move::typ::wait_1s) {
				if ((GetGameRuntimeSecs() - _demomove_starttime) > 1) {
					_curr_demomove++;
					_demomove_starttime = 0;
				}
			}
			else if (demomove.type == demo_move::typ::spawn_lineups) {
				auto ea = s_demo_lobbyviews[1].ent->getById<Component_54_Lobbymap>(0x54)->embedded_game_ea;
				for (auto& lineup : s_lineups) {
					auto loader = EntityLoader::Create(lineup.hero, try_load_resource(lineup.hero), false, false);
					/*Component_1_SceneRendering::InitData data{};
					data.position = lineup.position;
					data.rotation = lineup.rotation;
					data.scale = Vector4(1, 1, 1, 0);
					loader->loader_entries[1].init_data = (__int64)&data;*/
					auto ent = loader->Spawn(ea);
					auto sr = ent->getById<Component_1_SceneRendering>(1);
					sr->SetPosRotation(lineup.position, lineup.rotation);
					sr->SetScale(Vector4(1, 1, 1, 1));
					//sr->SetVisible();
					//test.push_back(sr);
				}
				_curr_demomove++;
				_demomove_starttime = 0;
			}
			else if (demomove.type == demo_move::typ::camera_move) {
				typedef std::reverse_iterator<std::map<double, cammove>::iterator> rit;
				auto delta = GetGameRuntimeSecs() - _demomove_starttime;
				rit it = demomove.move->rbegin();
				rit upper(it);
				while (it->first > delta) {
					upper = rit(it);
					it++;
				}
				rit lower = it;
				if (it == demomove.move->rbegin()) {
					_curr_demomove++;
					_demomove_starttime = 0;
				}
				Vector4 pos{};
				Vector4 rot{};
				pos = lower->second.position;
				rot = lower->second.rotation;
				auto timespan = upper->first - lower->first;
				if (timespan != 0) {
					double pos_delta = (delta - lower->first) / (upper->first - lower->first);
					pos.X += (upper->second.position.X - lower->second.position.X) * pos_delta;
					pos.Y += (upper->second.position.Y - lower->second.position.Y) * pos_delta;
					pos.Z += (upper->second.position.Z - lower->second.position.Z) * pos_delta;

					rot.X += (upper->second.rotation.X - lower->second.rotation.X) * pos_delta;
					rot.Y += (upper->second.rotation.Y - lower->second.rotation.Y) * pos_delta;
					rot.Z += (upper->second.rotation.Z - lower->second.rotation.Z) * pos_delta;
				}

				auto map = s_demo_lobbyviews[_curr_lobbymap].ent->getById<Component_54_Lobbymap>(0x54);
				auto camera = map->embedded_game_ea->getSingletonComponent<Component_4F_Camera>(0x4F);
				if (camera->override_views.num == 0) {
					camera->override_views.emplace_item(OverrideView{ (View*)teFreeLookView::create(), true });
				}
				auto view = camera->override_views.ptr[0].view_ptr;
				view->view_position = pos;
				view->view_rotation = rot;
				view->view_roll = Vector4(0,0,0,0);
			}
			//if (demo_join_game == 200) {
			//	*(int*)(matchmake_info_comp + 0x20) = 2;
			//}
			//else if (demo_join_game == 20) {
			//	*(int*)(matchmake_info_comp + 0x20) = 3;
			//}
			//else if (demo_join_game == 0) {
			//	auto world = get_system27_WorldEngineSystem(GameEntityAdmin());
			//	world->wanted_map_id = 0x800000000000165; //Hanamura
			//	world->world_state = 2;
			//}
			//else 
		}
	
		auto vmroot = GetViewModelRoot();
		for (auto vm : vmroot->viewmodel_list) {
			auto name = vm->vfptr->GetName();
			if (!strcmp(name, "LobbyMainMenuVM")) {
				__int64 buttons[] = { 0xac0000000000223, 0xac0000000000916, 0xac0000000000917, 0xac0000000000918, 0xac0000000000936, 0xad2ab0c7 };
				for (auto button : buttons) {
					auto play_enabled = vm->getByKey(button);
					if (play_enabled) {
						play_enabled->property.has_value = true;
						play_enabled->property.value = !demo_join_game;
						SendViewModelPropUpdate(vm, play_enabled);
					}
				}
			}
			else if (!strcmp(name, "LobbyPartyMemberMeVM")) {
				{
					auto name = vm->getByKey(0xfe11d138);
					string_rep* rep = (string_rep*)name->property.value;
					const char* new_name = "Jeff Kaplan";
					rep->extend_to(strlen(new_name));
					rep->actual_size = strlen(new_name);
					strcpy(rep->get(), new_name);
					SendViewModelPropUpdate(vm, name);
				}
				{
					auto background = vm->getByKey(0x7cac602a);
					background->property.value = 0xac00000000002cd;
					SendViewModelPropUpdate(vm, background);
				}
				{
					auto icon = vm->getByKey(0x11db7719);
					icon->property.value = 0xc0000000000135c;
					SendViewModelPropUpdate(vm, icon);
				}
			}
		}
	}
	if (!_input_component) {
		_input_component = LobbyEntityAdmin()->getSingletonComponent<Component_50_Input>(0x50);
	}
	else {
		/*char* curr = _input_component->tick10 ? _input_component->stru1.tick0 : _input_component->stru1.tick1;
		char* prev = _old_lbutton_states;*/

		//for (int i = 0; i < 0xc3; i++) {
		//	if (curr[i] != prev[i]) {
		//		//printf("button state changed: %x [%s] - %d\n", i, LogicalButtonById(i)->name, curr[i]);

		//		for (auto ent : _local_controller_entities) {
		//			auto ref_comp = ent->getById<Component_20_Pet>(0x20);
		//			auto aim_entid = ref_comp->aim_entid;
		//			//Many checks are probably not needed but better be safe than sorry...
		//			if (aim_entid > 0) {
		//				auto aim_ent = _game_ea->getEntById(aim_entid);
		//				if (aim_ent) {
		//					auto comp = aim_ent->getById<StatescriptComponent>(0x23);
		//					for (auto& script : comp->ss_inner) {
		//						auto event = (StatescriptNotification_LogicalButton*)comp->ss_inner.vfptr->Allocate_StatescriptE(&comp->ss_inner, ETYPE_LOGICALBUTTON);
		//						event->base.m_timestamp = comp->ss_inner.cf_timestamp;
		//						event->base.m_instanceId = script->instance_id;
		//						event->m_logicalButton = i;
		//						event->m_bButtonGoingDown = curr[i];
		//						script->vfptr->EnqueueE(script, (StatescriptNotification_Base*)event);

		//					}
		//				}
		//			}
		//		}
		//	}
		//}

		if (ImGui::IsKeyPressed(ImGuiKey_M, false)) {
			//0x580000000000352
			if (local_model) {
				auto ss = local_model->getById<Component_23_Statescript>(0x23);
				if (ss) {
					auto script = ss->ss_inner.getByResourceId(0x580000000000352);
					if (script) {
						script->ToggleState(17); //toggle_map logical button does not work
					}
				}
			}
		}

		if (ImGui::IsKeyPressed(ImGuiKey_UpArrow, false)) {
			for (auto ent : _local_controller_entities) {
				auto ref_comp = ent->getById<Component_20_ModelReference>(0x20);
				auto aim_entid = ref_comp->aim_entid;
				//Many checks are probably not needed but better be safe than sorry...
				if (aim_entid > 0) {
					auto aim_ent = _game_ea->getEntById(aim_entid);
					if (aim_ent) {
						auto comp = aim_ent->getById<__int64>(0x15);
						if (comp) {
							((Vector4*)((__int64)comp + 0xC70))->Y += 10.f;
						}
					}
				}
			}
		} else if (ImGui::IsKeyPressed(ImGuiKey_DownArrow, false)) {
			for (auto ent : _local_controller_entities) {
				auto ref_comp = ent->getById<Component_20_ModelReference>(0x20);
				auto aim_entid = ref_comp->aim_entid;
				//Many checks are probably not needed but better be safe than sorry...
				if (aim_entid > 0) {
					auto aim_ent = _game_ea->getEntById(aim_entid);
					if (aim_ent) {
						auto comp = aim_ent->getById<__int64>(0x15);
						if (comp) {
							((Vector4*)((__int64)comp + 0xC70))->Y -= 2.f;
						}
					}
				}
			}
		}
		else if (ImGui::IsKeyPressed(ImGuiKey_LeftArrow, false)) {
			(*globalTimeScale()) -= 0.5f;
		}
		else if (ImGui::IsKeyPressed(ImGuiKey_RightArrow, false)) {
			(*globalTimeScale()) += 0.5f;
		}

		//memcpy(_old_lbutton_states, curr, sizeof(_old_lbutton_states));
	}
	
	if (_trigger_helloVoiceLine_ticks > 0) {
		auto heroSelectActive_cvget = (char(*)(__int64, __int64, __int64, StatescriptPrimitive*))(globals::gameBase + 0xd8ee00);
		StatescriptPrimitive cv{};
		if (heroSelectActive_cvget(0, 0, 0, &cv) && !cv.is_truthy()) {
			if (--_trigger_helloVoiceLine_ticks == 0 && local_model) {
				if (local_model->resload_entry->valid()) {
					auto model_resid = local_model->resload_entry->align()->resource_id;
					auto mapping = s_modelEntToHelloVoiceMap.find(model_resid);
					if (mapping != s_modelEntToHelloVoiceMap.end()) {
						VoiceSystem_PlayVoice play_stru;
						play_stru.entity_1 = play_stru.entity_2 = play_stru.instigator_ent = local_model->entity_id;

						play_stru.field_20 = 0;
						play_stru.field_21 = 0;
						play_stru.voice_stimulus = 0xee0000000000001; //just taking the first one worked... lol
						play_stru.voice_line = mapping->second;

						auto voice_sys = GetVoiceSystem(_game_ea);
						voice_sys->vfptr->PlayVoice(voice_sys, &play_stru);
					}
				}
			}
		}
	}

	if (local_freeLookView) {
		for (auto ent : _local_controller_entities) {
			auto ref_comp = ent->getById<Component_20_ModelReference>(0x20);
			auto aim_entid = ref_comp->aim_entid;
			//Many checks are probably not needed but better be safe than sorry...
			if (aim_entid > 0) {
				auto aim_ent = _game_ea->getEntById(aim_entid);
				if (aim_ent) {
					auto filterbits = aim_ent->getById<Component_10_FilterBits>(0x10);
					filterbits->filter_bits |= 0x10 | 0x400000;
				}
			}
		}

		Vector4 position_delta{};
		/*if (_local_controller_entities.num > 0) {
			auto lp = _local_controller_entities.ptr[0]->getById<Component_2F_LocalPlayer>(0x2f);
			if (lp) {
				local_freeLookView->base.vfptr->field_30(&local_freeLookView->base, lp->mouse_rel_x, lp->mouse_rel_y);
			}
		}*/
		auto getMouseRel_fn = (void(__fastcall*)(Component_50_Input*, float* x, float* y))(globals::gameBase + 0xcee3f0);
		float x, y;
		if (_input_component) {
			__int64 viewmodel_list = *(__int64*)(globals::gameBase + 0x18a6688);
			if (viewmodel_list && !*(char*)(viewmodel_list + 0x95A)) {
				getMouseRel_fn(_input_component, &x, &y);
				local_freeLookView->base.vfptr->field_30(&local_freeLookView->base, x, y);

				float delta = freeLookView_movDelta;
				if (ImGui::IsKeyDown(ImGuiKey_LeftShift)) {
					delta *= 2;
				}
				if (ImGui::IsKeyDown(ImGuiKey_W)) {
					position_delta.Z += delta;
				}
				else if (ImGui::IsKeyDown(ImGuiKey_S)) {
					position_delta.Z -= delta;
				}
				if (ImGui::IsKeyDown(ImGuiKey_A)) {
					position_delta.X -= delta;
				}
				else if (ImGui::IsKeyDown(ImGuiKey_D)) {
					position_delta.X += delta;
				}
			}
		}
		local_freeLookView->position_delta = position_delta;
	}
	else {
		for (auto ent : _local_controller_entities) {
			auto ref_comp = ent->getById<Component_20_ModelReference>(0x20);
			auto aim_entid = ref_comp->aim_entid;
			//Many checks are probably not needed but better be safe than sorry...
			if (aim_entid > 0) {
				auto aim_ent = _game_ea->getEntById(aim_entid);
				if (aim_ent) {
					auto filterbits = aim_ent->getById<Component_10_FilterBits>(0x10);
					filterbits->filter_bits &= ~(0x10 | 0x400000);
				}
			}
		}
	}

	for (auto it = _newly_added_entities.begin(); it != _newly_added_entities.end();) {
		Entity* controller = *it;
		Entity* model = _game_ea->getEntById(controller->getById<Component_20_ModelReference>(0x20)->aim_entid);
		if (model) {
			//Moved into player spawner
			/*auto ss = model->getById<StatescriptComponent>(0x23);
			StatescriptPrimitive cv{};
			cv.type = StatescriptPrimitive_BYTE;
			cv.value = 1;
			ss->ss_inner.rid_entity_varbag->SetVar({ StatescriptVar_ENTITY_VARBAG, 0x0D800000000000FD }, cv);*/
			if (globals::isDemo) {
				auto localplayer = controller->getById<Component_2F_LocalPlayer>(0x2F);
				localplayer->SetRotation(Vector4(0.000000, -0.713039, 0.000000, 0));
				auto comp = model->getById<__int64>(0x15);
				if (comp) {
					*((Vector4*)((__int64)comp + 0xC70)) = Vector4(108.336914, 0.999023, 0.142578, 0);
					//Is inside MovementState, i need to finisht the demo this is ugly ;(
				}
			}

			auto tell_statescript_this_is_localent = (void(__fastcall*)(Entity*, uint*))(globals::gameBase + 0xd07830);
			tell_statescript_this_is_localent(model, &controller->entity_id);

			_newly_added_entities.erase(it);
			continue;
		}

		it++;
	}

	if (!_world)
		_world = get_system27_WorldEngineSystem(_game_ea);
	else {
		if (_world->world_state == 6) {
			_world->Call_OnStateChance();

			auto init_ss_fn = (void(*)(Component_23_Statescript*))(globals::gameBase + 0x103acb0);
			for (auto ent : *_game_ea) {
				auto ss = ent->getById<Component_23_Statescript>(0x23);
				if (ss)
					init_ss_fn(ss);
			}

			if (globals::isDemo) {
				//state_replicator::start_server();
			}
			
			if (globals::isDemo) {
				for (int i = 0; i < 5; i++) {
					spawn_pachis();
				}
			}
		}
		else if (_world->world_state == 5) {
			_world->Call_OnStateChance();
		}
	}
}

PrometheusSystem* PrometheusSystem::create(EntityAdminBase* ea) {
	if (s_instance) {
		printf("PrometheusSystem already created! %p\n", s_instance);
		return nullptr;
	}

	auto sys = new PrometheusSystem;
	//sys->vfptr = new PrometheusSystem_vt;
	sys->_game_ea = ea;
	ea->GameEA_mapfunc_arr.emplace_item((mapsystem_callback_vt**)&sys->_mapfunc);
	s_instance = sys;

	MH_VERIFY_RET(MH_CreateHook((PVOID)(globals::gameBase + 0xcfe920), deallocate_view_hook, (LPVOID*)&deallocate_view_orig), nullptr);
	MH_VERIFY_RET(MH_EnableHook((PVOID)(globals::gameBase + 0xcfe920)), nullptr);
	return sys;
}

View* PrometheusSystem::deallocate_view_hook(View* view, char dealloc) {
	if (view == &s_instance->local_freeLookView->base) {
		s_instance->local_freeLookView = nullptr;
	}
	return deallocate_view_orig(view, dealloc);
}

void PrometheusSystem_Mapfunc::field_0() {
	printf("PrometheusSystem_Mapfunc: field_0\n");
}
void PrometheusSystem_Mapfunc::nullsub_1() {
	printf("PrometheusSystem_Mapfunc: nullsub_1\n");
}
void PrometheusSystem_Mapfunc::change_state_3_globalloading() {
	printf("PrometheusSystem_Mapfunc: change_state_3_globalloading\n");
}
void PrometheusSystem_Mapfunc::change_state_4_worldloading() {
	printf("PrometheusSystem_Mapfunc: change_state_4_worldloading\n");
}
void PrometheusSystem_Mapfunc::change_state_5_worldloaded() {
	printf("PrometheusSystem_Mapfunc: change_state_5_worldloaded\n");
}
void PrometheusSystem_Mapfunc::change_state_6_world_replicating() {
	printf("PrometheusSystem_Mapfunc: change_state_6_world_replicating\n");
}
void PrometheusSystem_Mapfunc::change_state_7_gamemode_loading() {
	printf("PrometheusSystem_Mapfunc: change_state_7_gamemode_loading\n");
}
void PrometheusSystem_Mapfunc::maybe_on_gamemode_unload() {
	printf("PrometheusSystem_Mapfunc: maybe_on_gamemode_unload\n");
}
void PrometheusSystem_Mapfunc::on_gamemode_loading() {
	printf("PrometheusSystem_Mapfunc: on_gamemode_loading\n");
}
void PrometheusSystem_Mapfunc::maybe_on_map_unload() {
	printf("PrometheusSystem_Mapfunc: maybe_on_map_unload\n");
}
void PrometheusSystem_Mapfunc::OnWorldLoadedAndInGameEnttiyAdmin() {
	printf("PrometheusSystem_Mapfunc: OnWorldLoadedAndInGameEnttiyAdmin\n");
}
void PrometheusSystem_Mapfunc::OnWorldLoadingAndInGameEntityAdmin() {
	printf("PrometheusSystem_Mapfunc: OnWorldLoadingAndInGameEntityAdmin\n");
}
void PrometheusSystem_Mapfunc::field_5() {
	printf("PrometheusSystem_Mapfunc: field_5\n");
}
